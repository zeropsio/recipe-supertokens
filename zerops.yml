zerops:
  - setup: supertokens
    build:
      buildCommands:
        - echo "noop"
      deployFiles: ./supertokens-core/~
    run:
      base: java@21
      os: ubuntu
      prepareCommands:
        - curl 'https://api.supertokens.com/0/user/app/download?pluginName=postgresql&os=linux&core=9.3.0&api-version=0' --output supertokens.zip
        - unzip supertokens.zip
        - cd supertokens && sudo sh install
      ports:
        - port: 3567
          httpSupport: true
      initCommands:
        - sh setup-envs.sh
      start: supertokens start --foreground --with-config="/tmp/supertokens-config.yml"
  - setup: dashboard
    build:
      base: nodejs@20
      buildCommands:
        - |
          cd supertokens-dashboard
          npm i
      deployFiles: ./supertokens-dashboard/~
    run:
      base: nodejs@22
      os: alpine
      ports:
        - port: 3001
          httpSupport: true
      start: npm start




